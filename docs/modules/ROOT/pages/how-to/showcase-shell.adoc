= Creating a Showcase App Layout
:description: How to use the psd3-showcase-shell library to create full-viewport visualizations with panels
:keywords: showcase, shell, layout, panels, zoom, halogen

The `psd3-showcase-shell` library provides a reusable layout framework for data visualization "showcase" applications—full-viewport zoomable SVG with floating panels and a header overlay.

== What You Get

[source]
----
┌─────────────────────────────────────────────────────────────┐
│ HEADER (fixed, z-index 60, transparent option)              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────┐                                                 │
│ │ SLIDE   │  SVG LAYER (full viewport, zoomable)           │
│ │ PANEL   │  - .zoom-group receives transforms              │
│ │ (z:50)  │  - scroll to zoom, drag to pan                  │
│ │         │                                                 │
│ └─────────┘                                                 │
├─────────────────────────────────────────────────────────────┤
│ BOTTOM PANEL (fixed, z-index 40)                           │
└─────────────────────────────────────────────────────────────┘
----

== Quick Start

Add the dependency to your `spago.yaml`:

[source,yaml]
----
dependencies:
  - psd3-showcase-shell
  - psd3-selection
  # ... other deps

workspace:
  extraPackages:
    psd3-showcase-shell:
      path: ../../visualisation libraries/purescript-psd3-showcase-shell
    psd3-selection:
      path: ../../visualisation libraries/purescript-psd3-selection
----

Include the CSS in your HTML:

[source,html]
----
<link rel="stylesheet" href="path/to/psd3.css">
<link rel="stylesheet" href="path/to/showcase-shell.css">
----

== CSS-Only Usage

You can use the CSS classes directly without the Halogen components:

[source,purescript]
----
render state =
  HH.div
    [ HP.classes [ HH.ClassName "showcase-shell" ] ]
    [ HH.header
        [ HP.classes [ HH.ClassName "showcase-header" ] ]
        [ -- Your header content ]
    , HH.div
        [ HP.classes [ HH.ClassName "showcase-main" ] ]
        [ HH.div
            [ HP.classes [ HH.ClassName "showcase-svg-layer" ] ]
            [ SE.svg [ ... ]
                [ SE.g
                    [ HP.attr (HH.AttrName "class") "zoom-group" ]
                    [ -- Your visualization content ]
                ]
            ]
        , HH.div
            [ HP.classes [ HH.ClassName "showcase-panels" ] ]
            [ -- Your panels ]
        ]
    ]
----

== Panel Positions

Available panel positions with CSS classes:

[cols="1,2,2"]
|===
|Position |Class |Behavior

|Left
|`.showcase-panel--left`
|Full height, slides from left edge

|Right
|`.showcase-panel--right`
|Full height, slides from right edge

|Bottom
|`.showcase-panel--bottom`
|Full width, slides from bottom

|Top-left
|`.showcase-panel--top-left`
|Corner position, fades in/out

|Top-right
|`.showcase-panel--top-right`
|Corner position, fades in/out

|Bottom-left
|`.showcase-panel--bottom-left`
|Corner position, fades in/out

|Bottom-right
|`.showcase-panel--bottom-right`
|Corner position, fades in/out
|===

== Panel Open/Closed States

[source,purescript]
----
HH.div
  [ HP.classes $
      [ HH.ClassName "showcase-panel"
      , HH.ClassName "showcase-panel--left"
      ] <> if state.panelOpen
            then [ HH.ClassName "showcase-panel--open" ]
            else [ HH.ClassName "showcase-panel--closed" ]
  ]
  [ HH.button
      [ HP.classes [ HH.ClassName "showcase-panel-toggle" ]
      , HE.onClick \_ -> TogglePanel
      ]
      [ HH.text $ if state.panelOpen then "◀" else "▶" ]
  , HH.div
      [ HP.classes [ HH.ClassName "showcase-panel-content" ] ]
      [ -- Panel content ]
  ]
----

== Adding Zoom

Attach D3 zoom after the component mounts:

[source,purescript]
----
import PSD3.Internal.Behavior.FFI (attachZoomWithCallback_)

handleAction = case _ of
  Initialize -> do
    H.liftEffect attachZoom
    pure unit
  -- ...

attachZoom :: Effect Unit
attachZoom = do
  win <- window
  doc <- document win
  let nonElemNode = HTMLDocument.toNonElementParentNode doc
  maybeSvg <- getElementById "my-svg" nonElemNode
  case maybeSvg of
    Nothing -> pure unit
    Just svgElem -> do
      let initialZoom = { k: 1.0, x: 0.0, y: 0.0 }
      _ <- attachZoomWithCallback_ svgElem 0.1 10.0 ".zoom-group" initialZoom \zoom -> do
        -- Optional: handle zoom changes
        pure unit
      pure unit
----

IMPORTANT: Use `HP.attr (HH.AttrName "class") "zoom-group"` for SVG elements, not `HP.class_`. SVG elements have a read-only `className` property.

== CSS Custom Properties

Override these to customize the layout:

[source,css]
----
:root {
  --showcase-header-height: 60px;
  --showcase-panel-width: 320px;
  --showcase-panel-z: 50;
  --showcase-header-z: 60;
}
----

== Transparent Header

For headers that overlay the SVG with a blur effect:

[source,purescript]
----
HH.header
  [ HP.classes
      [ HH.ClassName "showcase-header"
      , HH.ClassName "showcase-header--transparent"
      ]
  ]
  [ -- Header content ]
----

== Demo

A working demo is available in the `psd3-showcase-shell` library:

[source,bash]
----
cd "visualisation libraries/purescript-psd3-showcase-shell"
cd demo && spago bundle
python3 -m http.server 8095
# Open http://localhost:8095/demo/
----

== Next Steps

* xref:how-to/zoom.adoc[Zoomable Visualizations] - More zoom options
* xref:how-to/halogen-events.adoc[Halogen Events from PSD3] - Integrate with app state
